<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Hazard Walking (colorful animated)</title>
<style>
  :root{
    --bg:#111;
    --ui-bg: rgba(255,255,255,0.06);
    --panel: rgba(255,255,255,0.03);
    --accent: #ffcc00;
    font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  }

  html,body { height:100%; margin:0; background:var(--bg); color:#eee; -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;}
  .wrap {
    display:flex;
    gap:18px;
    padding:20px;
    box-sizing:border-box;
    min-height:100vh;
    align-items:center;
    justify-content:center;
  }

  .stage {
    position:relative;
    width:min(900px, 92vw);
    height:56vh;
    max-height:640px;
    background:linear-gradient(180deg, rgba(0,0,0,0.25), rgba(0,0,0,0.48));
    border-radius:14px;
    overflow:hidden;
    box-shadow:0 8px 30px rgba(0,0,0,0.6);
    border:1px solid rgba(255,255,255,0.03);
    display:flex;
    align-items:center;
    justify-content:center;
  }

  canvas#stripes {
    position:absolute;
    inset:0;
    display:block;
    width:100%;
    height:100%;
    background:transparent;
  }

  /* center overlay for the animated walking SVG */
  .walker {
    position: absolute;
    bottom:12%;
    left:8%;
    width:120px;
    height:120px;
    transform-origin:center bottom;
    filter:drop-shadow(0 8px 20px rgba(0,0,0,0.6));
    will-change: transform, left;
  }

  /* flashing hazard text */
  .notice {
    position:absolute;
    top:12px;
    left:12px;
    padding:8px 12px;
    background:var(--ui-bg);
    border-radius:8px;
    font-weight:600;
    letter-spacing:0.04em;
    color:#fff;
    display:flex;
    gap:8px;
    align-items:center;
  }

  .controls {
    width:320px;
    padding:16px;
    background:var(--panel);
    border-radius:12px;
    display:flex;
    flex-direction:column;
    gap:12px;
    box-shadow:0 6px 18px rgba(0,0,0,0.5);
  }

  .controls label{ font-size:13px; color:#ddd; display:block; margin-bottom:6px; }
  .row { display:flex; gap:8px; align-items:center; }
  .color-swatch { width:36px; height:34px; border-radius:8px; border:1px solid rgba(255,255,255,0.06); }
  input[type="range"] { width:100%; }
  .btn { padding:8px 10px; background:var(--accent); border:none; border-radius:8px; color:#111; font-weight:700; cursor:pointer;}
  .small { font-size:13px; color:#bbb; }

  /* responsive */
  @media (max-width:880px){
    .wrap { flex-direction:column; align-items:stretch; gap:12px; padding:12px; }
    .controls{ width:100%; }
    .stage { height:56vh; }
  }
</style>
</head>
<body>
<div class="wrap">
  <div class="stage" role="img" aria-label="Animated hazard stripes with walking icon">
    <canvas id="stripes"></canvas>

    <div class="notice" aria-hidden="false">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
        <path d="M12 2v4" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        <path d="M12 18v4" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        <path d="M4 12h4" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        <path d="M16 12h4" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
      </svg>
      <span style="color:var(--accent)">HAZARD</span>
      <span class="small">Walking</span>
    </div>

    <!-- Walking person SVG (simple) -->
    <svg class="walker" id="walker" viewBox="0 0 120 120" aria-hidden="true">
      <!-- head -->
      <circle cx="26" cy="22" r="8" fill="#fff"/>
      <!-- body -->
      <path d="M26 30 L26 52" stroke="#fff" stroke-width="4" stroke-linecap="round" />
      <!-- left arm -->
      <path d="M26 36 L12 44" stroke="#fff" stroke-width="4" stroke-linecap="round" />
      <!-- right arm -->
      <path d="M26 36 L40 44" stroke="#fff" stroke-width="4" stroke-linecap="round" />
      <!-- left leg -->
      <path id="legL" d="M26 52 L18 70" stroke="#fff" stroke-width="4" stroke-linecap="round" />
      <!-- right leg -->
      <path id="legR" d="M26 52 L36 70" stroke="#fff" stroke-width="4" stroke-linecap="round" />
    </svg>
  </div>

  <div class="controls" aria-label="Controls for hazard colors and animation speed">
    <div>
      <label for="color1">Stripe color — primary</label>
      <div class="row">
        <input id="color1" type="color" value="#ffcc00">
        <div id="sw1" class="color-swatch" style="background:#ffcc00"></div>
      </div>
    </div>

    <div>
      <label for="color2">Stripe color — secondary</label>
      <div class="row">
        <input id="color2" type="color" value="#000000">
        <div id="sw2" class="color-swatch" style="background:#000000"></div>
      </div>
    </div>

    <div>
      <label for="speed">Stripe speed</label>
      <div class="row">
        <input id="speed" type="range" min="10" max="600" value="200">
        <div style="width:48px; text-align:center;" id="speedVal">200</div>
      </div>
      <div class="small">Higher = faster animation.</div>
    </div>

    <div>
      <label for="angle">Stripe diagonal angle</label>
      <div class="row">
        <input id="angle" type="range" min="10" max="80" value="30">
        <div style="width:48px; text-align:center;" id="angleVal">30°</div>
      </div>
    </div>

    <div style="display:flex; gap:8px; margin-top:6px;">
      <button id="pause" class="btn">Pause</button>
      <button id="reset" class="btn" style="background:#888; color:#fff;">Reset</button>
    </div>

    <div class="small" style="margin-top:8px;">
      Tip: pick a bright primary color (yellow/orange) and a dark secondary for classic hazard look.
    </div>
  </div>
</div>

<script>
/*
  Hazard walking canvas + walker animation
  - Diagonal stripes drawn to a canvas, animated by offset
  - Color controls and speed/angle controls
  - Small walking SVG moves back-and-forth and leg paths are animated
*/

(() => {
  const canvas = document.getElementById('stripes');
  const ctx = canvas.getContext('2d', {alpha:true});

  // Controls
  const color1Input = document.getElementById('color1');
  const color2Input = document.getElementById('color2');
  const sw1 = document.getElementById('sw1');
  const sw2 = document.getElementById('sw2');
  const speedInput = document.getElementById('speed');
  const speedVal = document.getElementById('speedVal');
  const angleInput = document.getElementById('angle');
  const angleVal = document.getElementById('angleVal');
  const pauseBtn = document.getElementById('pause');
  const resetBtn = document.getElementById('reset');

  // walker elements
  const walker = document.getElementById('walker');
  const legL = document.getElementById('legL');
  const legR = document.getElementById('legR');

  let running = true;
  let last = performance.now();
  let offset = 0; // offset for stripe animation
  let walkerProgress = 0; // 0..1 back-and-forth
  let walkerDir = 1;

  // default settings
  let settings = {
    color1: color1Input.value,
    color2: color2Input.value,
    speed: Number(speedInput.value),
    angleDeg: Number(angleInput.value)
  };

  // high-dpi canvas resize
  function resizeCanvas() {
    const dpr = Math.max(1, window.devicePixelRatio || 1);
    const rect = canvas.getBoundingClientRect();
    canvas.width = Math.round(rect.width * dpr);
    canvas.height = Math.round(rect.height * dpr);
    ctx.setTransform(dpr,0,0,dpr,0,0); // scale drawing to CSS pixels
    draw(0); // initial draw
  }

  function draw(dt) {
    const w = canvas.width / (window.devicePixelRatio || 1);
    const h = canvas.height / (window.devicePixelRatio || 1);

    // clear slowly to show layered effect
    ctx.clearRect(0,0,w,h);

    // stripe parameters
    const angle = settings.angleDeg * Math.PI/180;
    const stripeWidth = Math.max(24, Math.min(120, Math.round(Math.min(w,h) * 0.12)));
    const spacing = stripeWidth * 0.0; // stripes contiguous

    // compute repeating pattern length along perpendicular
    const diag = Math.abs(Math.cos(angle)*w) + Math.abs(Math.sin(angle)*h);
    const patternSize = stripeWidth*2;
    // update offset based on speed
    offset = (offset + dt * settings.speed * 0.06) % patternSize;

    // draw stripes by tiling rectangles rotated
    ctx.save();
    // draw onto an off-screen pattern via transformation
    ctx.translate(0,0);
    ctx.beginPath();
    ctx.rect(0,0,w,h);
    ctx.clip();

    // We'll paint by drawing parallelograms across the canvas
    const step = stripeWidth;
    // start a bit earlier to cover moved offset
    const start = -patternSize*2 - diag;

    for (let x = start; x < w + diag + patternSize*2; x += stripeWidth) {
      // compute a path for a parallelogram representing each stripe
      const t = x + offset;
      ctx.save();
      ctx.translate(x,0);
      ctx.rotate(angle);
      // using simple rect for rotated canvas
      // alternate colors
      const i = Math.floor((x - start)/stripeWidth);
      ctx.fillStyle = (i % 2 === 0) ? settings.color1 : settings.color2;
      // draw rectangle larger than canvas so rotation doesn't clip
      ctx.fillRect(-diag*2, -diag*2, stripeWidth*1.2 + diag*4, diag*4 + h*2);
      ctx.restore();
    }

    ctx.restore();

    // add subtle glare/shine to give depth
    const g = ctx.createLinearGradient(0,0,0,h);
    g.addColorStop(0,'rgba(255,255,255,0.03)');
    g.addColorStop(0.5,'rgba(0,0,0,0.02)');
    g.addColorStop(1,'rgba(255,255,255,0.01)');
    ctx.fillStyle = g;
    ctx.fillRect(0,0,w,h);
  }

  function animate(t) {
    if (!running) { last = t; requestAnimationFrame(animate); return; }
    const dt = (t - last);
    last = t;

    draw(dt);

    // walker pacing: moves left-right across the stage
    const stage = canvas.getBoundingClientRect();
    const walkerRect = walker.getBoundingClientRect();
    // update progress based on speed - normalized
    const paceSpeed = Math.max(0.03, settings.speed / 2600); // smaller = slower
    walkerProgress += walkerDir * paceSpeed * (dt/16);
    if (walkerProgress > 1) { walkerProgress = 1; walkerDir = -1; }
    if (walkerProgress < 0) { walkerProgress = 0; walkerDir = 1; }

    // compute left position (8%..72% of stage width)
    const leftPctMin = 8;
    const leftPctMax = 72;
    const leftPct = leftPctMin + (leftPctMax - leftPctMin) * walkerProgress;
    walker.style.left = leftPct + "%";

    // simple leg animation by altering path d with sine motion
    const legAmp = 6 + paceSpeed * 18;
    const footSwing = Math.sin(t/120) * legAmp;
    const footSwing2 = Math.sin(t/120 + Math.PI) * legAmp;

    // left leg path: M26 52 L(18+x) (70+y)
    legL.setAttribute('d', `M26 52 L${18 + footSwing.toFixed(1)} ${70 - Math.abs(footSwing/2).toFixed(1)}`);
    legR.setAttribute('d', `M26 52 L${36 + footSwing2.toFixed(1)} ${70 - Math.abs(footSwing2/2).toFixed(1)}`);

    requestAnimationFrame(animate);
  }

  // UI bindings
  color1Input.addEventListener('input', (e) => {
    settings.color1 = e.target.value;
    sw1.style.background = settings.color1;
  });
  color2Input.addEventListener('input', (e) => {
    settings.color2 = e.target.value;
    sw2.style.background = settings.color2;
  });
  speedInput.addEventListener('input', (e) => {
    settings.speed = Number(e.target.value);
    speedVal.textContent = settings.speed;
  });
  angleInput.addEventListener('input', (e) => {
    settings.angleDeg = Number(e.target.value);
    angleVal.textContent = `${settings.angleDeg}°`;
  });

  pauseBtn.addEventListener('click', () => {
    running = !running;
    pauseBtn.textContent = running ? 'Pause' : 'Resume';
  });

  resetBtn.addEventListener('click', () => {
    // restore defaults
    color1Input.value = '#ffcc00';
    color2Input.value = '#000000';
    speedInput.value = 200;
    angleInput.value = 30;
    settings.color1 = color1Input.value;
    settings.color2 = color2Input.value;
    settings.speed = Number(speedInput.value);
    settings.angleDeg = Number(angleInput.value);
    sw1.style.background = settings.color1;
    sw2.style.background = settings.color2;
    speedVal.textContent = settings.speed;
    angleVal.textContent = `${settings.angleDeg}°`;
  });

  // handle resize
  window.addEventListener('resize', resizeCanvas);
  // initial setup
  resizeCanvas();
  speedVal.textContent = settings.speed;
  angleVal.textContent = settings.angleDeg + '°';

  // start animation
  requestAnimationFrame(animate);
})();
</script>
</body>
</html>
